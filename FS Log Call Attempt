// get_lead = zoho.crm.getRecordById("Leads",LeadID);
// get_call_status = get_lead.get("Log_Call_Attempt");
// get_advisor = get_lead.get("FS_Advisor");
info get_advisor;
if(get_advisor == null)
{
	get_advisor = 315889000000633001;
	// MUST UPDATE THE ID FOR THE USER FOR THIS TO WORK
}
info get_advisor;
testtime = zoho.currenttime;
info testtime;
current_time = zoho.currenttime.toString("yyyy-MM-dd'T'HH:mm:ss","Europe/London");
current_date = zoho.currentdate.toString("yyyy-MM-dd");
info current_time;
info current_date;
info get_call_status;
if(get_call_status == "Successful Call")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","Successful Call");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","Successful Call");
	call_map.put("Description","Call Created using 'Successful Call' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	lead_map.put("Last_Successful_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
if(get_call_status == "Voicemail Left")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","Voicemail Left");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","Voicemail Left");
	call_map.put("Description","Call Created using 'Voicemail Left' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
if(get_call_status == "No Answer")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","No Answer");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","No Answer");
	call_map.put("Description","Call Created using 'No Answer' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
if(get_call_status == "WhatsApp Sent")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","WhatsApp Sent");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","WhatsApp Sent");
	call_map.put("Description","Call Created using 'WhatsApp Sent' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
if(get_call_status == "SMS Sent")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","SMS Sent");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","SMS Sent");
	call_map.put("Description","Call Created using 'SMS Sent' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
if(get_call_status == "Email Sent")
{
	call_map = Map();
	call_map.put("$se_module","Leads");
	call_map.put("What_Id",LeadID);
	call_map.put("Subject","Email Sent");
	call_map.put("Owner",get_advisor);
	call_map.put("Call_Type","Outbound");
	call_map.put("Call_Start_Time",current_time);
	call_map.put("Call_Result","Email Sent");
	call_map.put("Description","Call Created using 'Email Sent' template on Lead.");
	call_map.put("Outgoing_Call_Status","Completed");
	response = zoho.crm.createRecord("Calls",call_map,{"trigger":{"workflow"}});
	info response;
	lead_map = Map();
	lead_map.put("Log_Call_Attempt",null);
	lead_map.put("Last_Attempted_Contact_Date",current_date);
	reset = zoho.crm.updateRecord("Leads",LeadID,lead_map);
	info reset;
}
